#!/usr/bin/env python

import yaml

#-----------------------------------------------------------------------------
# Handle missing, bad permissions, and empty or null data, AI!
def load_yaml_file(yaml_file_path):
    with open(yaml_file_path, 'r') as file:
        return yaml.safe_load(file)

#-----------------------------------------------------------------------------
def parse_yaml_to_markdown(yaml_file_path):
    yaml_content = load_yaml_file(yaml_file_path)

    # Extract parameters
    parameters = yaml_content.get('parameters', [])

    # Prepare markdown table
    markdown_table = "| Name | Type | Default | Description |\n"
    markdown_table += "|------|------|---------|-------------|\n"

    for param in parameters:
        name = param.get('name', '')
        param_type = param.get('type', '')
        default = param.get('default', '')
        description = param.get('description', '')

        markdown_table += f"| {name} | {param_type} | {default} | {description} |\n"

    return markdown_table

# Example usage
yaml_file_path = 'azure-pipelines.yml'  # Replace with your YAML file path
markdown_output = parse_yaml_to_markdown(yaml_file_path)
print(markdown_output)
